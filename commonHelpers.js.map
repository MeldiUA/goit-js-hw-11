{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector(\".form\");\n\nconst galleryList = document.querySelector(\".gallery\");\n\nconst loader = document.querySelector('.loader');\n\nconst userQuery = document.querySelector('input[name=\"search\"]');\n\n\nconst searchParamsDefaults = new URLSearchParams({\n    key: '41901315-991c01eb87449dbd0d544d02b',\n    q: \"cat\",\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n});\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n    nav: true,\n    captionDelay: 250,\n    captionsData: 'alt',\n    close: true,\n    enableKeyboard: true,\n    docClose: true,\n  });\n\n\n function searchImg (params) {\n    return fetch(`https://pixabay.com/api/?${params}`)\n        .then((response) => {\n            if (!response.ok) {\n                throw new Error(\"Request is not OK\");\n            }\n            return response.json();\n        })\n        .then(({ hits }) => {\n            if(hits.length > 0){\n                const renderImg = hits.reduce((html, img) => {\n                    return (\n                      html +\n                      `<li class=\"gallery-item\">\n                  <a href=${img.largeImageURL}> \n                    <img class=\"gallery-img\" src =${img.webformatURL} alt=${img.tags}/>\n                  </a>\n                  <div class=\"gallery-text-box\">\n                    <p>Likes: <span class=\"text-value\">${img.likes}</span></p>\n                    <p>views: <span class=\"text-value\">${img.views}</span></p>\n                    <p>comments: <span class=\"text-value\">${img.comments}</span></p>\n                    <p>downloads: <span class=\"text-value\">${img.downloads}</span></p>\n                </div>\n                </li>`\n                    );\n                  }, '');\n\n                  galleryList.innerHTML = renderImg;\n                  lightbox.refresh();\n            } \n            else {\n                iziToast.error({\n                  position: 'topRight',\n                  message:\n                    'Sorry, there are no images matching your search query. Please try again!',\n                });\n        }\n     })\n     .catch(error => {\n        console.log(error.message);\n      })\n      .finally(() => {\n        loader.style.display = 'none';\n      });\n}\n\nform.addEventListener('submit', event => {\n    event.preventDefault();\n    galleryList.innerHTML = '';\n    loader.style.display = 'block';\n    searchParamsDefaults.set(\"q\", userQuery.value.trim());\n    const searchParams = new URLSearchParams(searchParamsDefaults);\n    searchImg(searchParams);\n    event.currentTarget.reset();\n  });\n\n\n\n"],"names":["form","galleryList","loader","userQuery","searchParamsDefaults","lightbox","SimpleLightbox","searchImg","params","response","hits","renderImg","html","img","iziToast","error","event","searchParams"],"mappings":"6vBAKA,MAAMA,EAAO,SAAS,cAAc,OAAO,EAErCC,EAAc,SAAS,cAAc,UAAU,EAE/CC,EAAS,SAAS,cAAc,SAAS,EAEzCC,EAAY,SAAS,cAAc,sBAAsB,EAGzDC,EAAuB,IAAI,gBAAgB,CAC7C,IAAK,qCACL,EAAG,MACH,WAAY,QACZ,YAAa,aACb,WAAY,EAChB,CAAC,EAEKC,EAAW,IAAIC,EAAe,aAAc,CAC9C,IAAK,GACL,aAAc,IACd,aAAc,MACd,MAAO,GACP,eAAgB,GAChB,SAAU,EACd,CAAG,EAGF,SAASC,EAAWC,EAAQ,CACzB,OAAO,MAAM,4BAA4BA,GAAQ,EAC5C,KAAMC,GAAa,CAChB,GAAI,CAACA,EAAS,GACV,MAAM,IAAI,MAAM,mBAAmB,EAEvC,OAAOA,EAAS,MAC5B,CAAS,EACA,KAAK,CAAC,CAAE,KAAAC,KAAW,CAChB,GAAGA,EAAK,OAAS,EAAE,CACf,MAAMC,EAAYD,EAAK,OAAO,CAACE,EAAMC,IAE/BD,EACA;AAAA,4BACMC,EAAI;AAAA,oDACoBA,EAAI,oBAAoBA,EAAI;AAAA;AAAA;AAAA,yDAGvBA,EAAI;AAAA,yDACJA,EAAI;AAAA,4DACDA,EAAI;AAAA,6DACHA,EAAI;AAAA;AAAA,uBAI5C,EAAE,EAELZ,EAAY,UAAYU,EACxBN,EAAS,QAAO,CACrB,MAEGS,EAAS,MAAM,CACb,SAAU,WACV,QACE,0EACpB,CAAiB,CAEjB,CAAM,EACA,MAAMC,GAAS,CACb,QAAQ,IAAIA,EAAM,OAAO,CACjC,CAAO,EACA,QAAQ,IAAM,CACbb,EAAO,MAAM,QAAU,MAC/B,CAAO,CACP,CAEAF,EAAK,iBAAiB,SAAUgB,GAAS,CACrCA,EAAM,eAAc,EACpBf,EAAY,UAAY,GACxBC,EAAO,MAAM,QAAU,QACvBE,EAAqB,IAAI,IAAKD,EAAU,MAAM,KAAI,CAAE,EACpD,MAAMc,EAAe,IAAI,gBAAgBb,CAAoB,EAC7DG,EAAUU,CAAY,EACtBD,EAAM,cAAc,OACxB,CAAG"}